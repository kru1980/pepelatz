$(function(){function o(){$("form.login p.error, form.register p.error").remove(),$("form.login input, form.register input").removeClass("error")}var r=!0;$(".switch-button").on("click",function(n){n.preventDefault(),$("input").val(""),o(),r?(r=!1,$(".register").show("slow"),$(".login").hide()):(r=!0,$(".login").show("slow"),$(".register").hide())}),$("form.login input, form.register input").on("focus",function(){o()}),$(".register-button").on("click",function(r){r.preventDefault(),o();var n={login:$("#register-login").val(),password:$("#register-password").val(),passwordConfirm:$("#register-password-confirm").val()};console.log("отправляемые данные на сервер",n),$.ajax({type:"POST",data:JSON.stringify(n),contentType:"application/json",url:"/api/auth/register"}).done(function(o){console.log(o),o.ok?$(location).attr("href","/"):($(".register h2").after('<p class="error">'+o.error+"</p>"),o.fields&&o.fields.forEach(function(o){$("input[name="+o+"]").addClass("error")}))})}),$(".login-button").on("click",function(r){r.preventDefault(),o();var n={login:$("#login-login").val(),password:$("#login-password").val()};$.ajax({type:"POST",data:JSON.stringify(n),contentType:"application/json",url:"/api/auth/login"}).done(function(o){o.ok?$(location).attr("href","/"):($(".login h2").after('<p class="error">'+o.error+"</p>"),o.fields&&o.fields.forEach(function(o){$("input[name="+o+"]").addClass("error")}))})})});